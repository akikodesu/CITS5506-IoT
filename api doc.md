| **API Endpoint**                         | **Method** | **Purpose**                                                           | **Request Body / Query**                                                                    | **Response Example**                                                                                  |
| ---------------------------------------- | ---------- | --------------------------------------------------------------------- | ------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------- |
| **POST /api/occupancy/update**           | POST       | Raspberry Pi uploads an occupancy change (after edge case processing) | JSON:{ "timestamp": string, "delta": int, "current_count": int, "door": "Entry" or "Exit" } | { "status": "success" }                                                                               |
| **GET /api/occupancy/current**           | GET        | Frontend fetches the current occupancy and overcrowding status        | None                                                                                        | { "current_count": int, "overcrowding": bool, "threshold": int, "last_update": string }               |
| **GET /api/occupancy/history**           | GET        | Frontend fetches occupancy history data for trend graphs              | Query:from (optional ISO8601 timestamp)to (optional ISO8601 timestamp)                      | { "history": [ { "timestamp": string, "delta": int, "resulting_count": int, "door": string }, ... ] } |
| **GET /api/alert/status**                | GET        | Frontend checks if the overcrowding alert is active                   | None                                                                                        | { "overcrowding": bool, "threshold": int, "current_count": int }                                      |
| **POST /api/occupancy/reset** (optional) | POST       | Admin manually resets the occupancy counter to 0                      | None                                                                                        | { "status": "reset_done" }                                                                            |
